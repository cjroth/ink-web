{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "table",
  "type": "registry:ui",
  "title": "Table",
  "description": "A terminal table component for displaying tabular data",
  "files": [
    {
      "path": "ui/table.tsx",
      "type": "registry:ui",
      "target": "components/ui/table.tsx",
      "content": "/**\n * Table component for ink-web\n *\n * Based on ink-table by Matic Zavadlal\n * https://github.com/maticzav/ink-table\n * MIT License\n *\n * Adapted for browser compatibility with ink-web by removing Node.js dependencies.\n */\n\nimport React from 'react'\nimport { Box, Text } from 'ink-web/bundled'\n\ntype Scalar = string | number | boolean | null | undefined\n\ntype ScalarDict = {\n  [key: string]: Scalar\n}\n\nexport type CellProps = React.PropsWithChildren<{ column: number }>\n\nexport type TableProps<T extends ScalarDict> = {\n  data: T[]\n  columns?: (keyof T)[]\n  padding?: number\n  header?: (props: React.PropsWithChildren<{}>) => React.ReactElement\n  cell?: (props: CellProps) => React.ReactElement\n  skeleton?: (props: React.PropsWithChildren<{}>) => React.ReactElement\n}\n\nfunction Header(props: React.PropsWithChildren<{}>) {\n  return (\n    <Text bold color=\"blue\">\n      {props.children}\n    </Text>\n  )\n}\n\nfunction Cell(props: CellProps) {\n  return <Text>{props.children}</Text>\n}\n\nfunction Skeleton(props: React.PropsWithChildren<{}>) {\n  return <Text bold>{props.children}</Text>\n}\n\nfunction intersperse<T, I>(\n  intersperser: (index: number) => I,\n  elements: T[]\n): (T | I)[] {\n  let interspersed: (T | I)[] = elements.reduce((acc, element, index) => {\n    if (acc.length === 0) return [element]\n    return [...acc, intersperser(index), element]\n  }, [] as (T | I)[])\n  return interspersed\n}\n\ntype RowConfig = {\n  cell: (props: CellProps) => React.ReactElement\n  padding: number\n  skeleton: {\n    component: (props: React.PropsWithChildren<{}>) => React.ReactElement\n    left: string\n    right: string\n    cross: string\n    line: string\n  }\n}\n\ntype Column<T> = {\n  key: string\n  column: keyof T\n  width: number\n}\n\ntype RowProps<T extends ScalarDict> = {\n  rowKey: string\n  data: Partial<T>\n  columns: Column<T>[]\n}\n\nfunction createRow<T extends ScalarDict>(\n  config: RowConfig\n): (props: RowProps<T>) => React.ReactElement {\n  const skeleton = config.skeleton\n\n  return (props) => (\n    <Box flexDirection=\"row\">\n      <skeleton.component>{skeleton.left}</skeleton.component>\n      {...intersperse(\n        (i) => {\n          const key = `${props.rowKey}-hseparator-${i}`\n          return (\n            <skeleton.component key={key}>{skeleton.cross}</skeleton.component>\n          )\n        },\n        props.columns.map((column, colI) => {\n          const value = props.data[column.column]\n\n          if (value == undefined || value == null) {\n            const key = `${props.rowKey}-empty-${column.key}`\n            return (\n              <config.cell key={key} column={colI}>\n                {skeleton.line.repeat(column.width)}\n              </config.cell>\n            )\n          } else {\n            const key = `${props.rowKey}-cell-${column.key}`\n            const ml = config.padding\n            const mr = column.width - String(value).length - config.padding\n            return (\n              <config.cell key={key} column={colI}>\n                {`${skeleton.line.repeat(ml)}${String(value)}${skeleton.line.repeat(mr)}`}\n              </config.cell>\n            )\n          }\n        })\n      )}\n      <skeleton.component>{skeleton.right}</skeleton.component>\n    </Box>\n  )\n}\n\nexport function Table<T extends ScalarDict>({\n  data,\n  columns: columnsProp,\n  padding = 1,\n  header = Header,\n  cell = Cell,\n  skeleton = Skeleton,\n}: TableProps<T>) {\n  const getDataKeys = (): (keyof T)[] => {\n    let keys = new Set<keyof T>()\n    for (const row of data) {\n      for (const key in row) {\n        keys.add(key)\n      }\n    }\n    return Array.from(keys)\n  }\n\n  const columns = columnsProp || getDataKeys()\n\n  const getColumns = (): Column<T>[] => {\n    return columns.map((key) => {\n      const headerWidth = String(key).length\n      const dataWidths = data.map((row) => {\n        const value = row[key]\n        if (value == undefined || value == null) return 0\n        return String(value).length\n      })\n      const width = Math.max(...dataWidths, headerWidth) + padding * 2\n      return {\n        column: key,\n        width: width,\n        key: String(key),\n      }\n    })\n  }\n\n  const getHeadings = (): Partial<T> => {\n    return columns.reduce(\n      (acc, column) => ({ ...acc, [column]: column }),\n      {}\n    )\n  }\n\n  const columnData = getColumns()\n  const headings = getHeadings()\n\n  const headerRow = createRow<T>({\n    cell: skeleton,\n    padding,\n    skeleton: {\n      component: skeleton,\n      line: '─',\n      left: '┌',\n      right: '┐',\n      cross: '┬',\n    },\n  })\n\n  const headingRow = createRow<T>({\n    cell: header,\n    padding,\n    skeleton: {\n      component: skeleton,\n      line: ' ',\n      left: '│',\n      right: '│',\n      cross: '│',\n    },\n  })\n\n  const separatorRow = createRow<T>({\n    cell: skeleton,\n    padding,\n    skeleton: {\n      component: skeleton,\n      line: '─',\n      left: '├',\n      right: '┤',\n      cross: '┼',\n    },\n  })\n\n  const dataRow = createRow<T>({\n    cell,\n    padding,\n    skeleton: {\n      component: skeleton,\n      line: ' ',\n      left: '│',\n      right: '│',\n      cross: '│',\n    },\n  })\n\n  const footerRow = createRow<T>({\n    cell: skeleton,\n    padding,\n    skeleton: {\n      component: skeleton,\n      line: '─',\n      left: '└',\n      right: '┘',\n      cross: '┴',\n    },\n  })\n\n  return (\n    <Box flexDirection=\"column\">\n      {headerRow({ rowKey: 'header', columns: columnData, data: {} })}\n      {headingRow({ rowKey: 'heading', columns: columnData, data: headings })}\n      {data.map((row, index) => {\n        const key = `row-${index}`\n        return (\n          <Box flexDirection=\"column\" key={key}>\n            {separatorRow({ rowKey: `separator-${key}`, columns: columnData, data: {} })}\n            {dataRow({ rowKey: `data-${key}`, columns: columnData, data: row })}\n          </Box>\n        )\n      })}\n      {footerRow({ rowKey: 'footer', columns: columnData, data: {} })}\n    </Box>\n  )\n}\n\nexport default Table\nexport { Header, Cell, Skeleton }\n"
    }
  ]
}
