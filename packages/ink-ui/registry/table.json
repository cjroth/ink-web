{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "table",
  "type": "registry:ui",
  "title": "Table",
  "description": "A table component with box-drawing borders, column alignment, per-cell styling, and footer rows",
  "files": [
    {
      "path": "ui/table.tsx",
      "type": "registry:ui",
      "target": "components/ui/table.tsx",
      "content": "import React, { type ReactNode } from 'react'\nimport { Box, Text } from 'ink'\n\n// ── Shared types ──\n\nexport interface Column {\n  header: string\n  width?: number\n  minWidth?: number\n  align?: 'left' | 'right'\n  headerColor?: string\n}\n\nexport interface Cell {\n  text: string\n  color?: string\n  bold?: boolean\n  dimColor?: boolean\n  /** Custom node for rendering. `text` is still required for width calculation. */\n  node?: ReactNode\n}\n\n// ── Props union ──\n\ntype TableBaseProps = {\n  padding?: number\n  /** Max header width before truncating with … */\n  maxHeaderWidth?: number\n}\n\ntype SimpleTableProps<T> = TableBaseProps & {\n  data: T[]\n  columns?: (keyof T)[]\n  rows?: never\n  footerRows?: never\n}\n\ntype AdvancedTableProps = TableBaseProps & {\n  columns: Column[]\n  rows: Cell[][]\n  footerRows?: Cell[][]\n  data?: never\n}\n\nexport type TableProps<T extends Record<string, unknown> = Record<string, unknown>> =\n  | SimpleTableProps<T>\n  | AdvancedTableProps\n\n// ── Helpers ──\n\nfunction buildBorder(type: 'top' | 'mid' | 'bot', widths: number[]): string {\n  const c = {\n    top: { l: '╭', r: '╮', m: '┬', h: '─' },\n    mid: { l: '├', r: '┤', m: '┼', h: '─' },\n    bot: { l: '╰', r: '╯', m: '┴', h: '─' },\n  }[type]\n  return c.l + widths.map(w => c.h.repeat(w + 2)).join(c.m) + c.r\n}\n\nfunction truncate(s: string, max: number): string {\n  return s.length > max ? s.slice(0, max - 1) + '…' : s\n}\n\nfunction computeWidths(columns: Column[], rows: Cell[][], footerRows: Cell[][], maxHeader: number): number[] {\n  return columns.map((col, i) => {\n    let w = Math.min(col.header.length, maxHeader)\n    if (col.minWidth) w = Math.max(w, col.minWidth)\n    for (const row of rows) {\n      const cell = row[i]\n      if (cell) w = Math.max(w, cell.text.length)\n    }\n    for (const row of footerRows) {\n      const cell = row[i]\n      if (cell) w = Math.max(w, cell.text.length)\n    }\n    return col.width ?? w\n  })\n}\n\nfunction pad(s: string, w: number, align: 'left' | 'right'): string {\n  return align === 'right' ? s.padStart(w) : s.padEnd(w)\n}\n\nfunction V() {\n  return <Text dimColor>│</Text>\n}\n\nfunction renderRow(cells: Cell[], widths: number[], columns: Column[]) {\n  return (\n    <Box>\n      {cells.map((cell, i) => {\n        const w = widths[i]!\n        const align = columns[i]?.align ?? 'left'\n        return (\n          <React.Fragment key={i}>\n            <V />\n            {cell.node ? (\n              <Box width={w + 2} justifyContent={align === 'right' ? 'flex-end' : undefined}>\n                <Text> </Text>\n                {cell.node}\n                {align === 'right' && <Text> </Text>}\n              </Box>\n            ) : (\n              <Text\n                color={cell.color as any}\n                bold={cell.bold}\n                dimColor={cell.dimColor}\n              >\n                {' '}{pad(cell.text, w, align)}{' '}\n              </Text>\n            )}\n          </React.Fragment>\n        )\n      })}\n      <V />\n    </Box>\n  )\n}\n\n// ── Simple → Advanced conversion ──\n\nfunction toAdvanced<T extends Record<string, unknown>>(\n  data: T[],\n  columnKeys?: (keyof T)[],\n): { columns: Column[]; rows: Cell[][] } {\n  const keys: (keyof T)[] = columnKeys ?? Array.from(\n    data.reduce((set, row) => {\n      for (const k in row) set.add(k)\n      return set\n    }, new Set<keyof T>()),\n  )\n\n  const columns: Column[] = keys.map(k => ({ header: String(k) }))\n  const rows: Cell[][] = data.map(row =>\n    keys.map(k => ({ text: row[k] == null ? '' : String(row[k]) })),\n  )\n\n  return { columns, rows }\n}\n\n// ── Component ──\n\nexport function Table<T extends Record<string, unknown>>(props: TableProps<T>) {\n  let columns: Column[]\n  let rows: Cell[][]\n  let footerRows: Cell[] [] = []\n  let maxHeaderWidth: number\n\n  if ('data' in props && props.data !== undefined) {\n    const converted = toAdvanced(props.data, props.columns)\n    columns = converted.columns\n    rows = converted.rows\n    maxHeaderWidth = props.maxHeaderWidth ?? Infinity\n  } else {\n    columns = (props as AdvancedTableProps).columns\n    rows = (props as AdvancedTableProps).rows\n    footerRows = (props as AdvancedTableProps).footerRows ?? []\n    maxHeaderWidth = props.maxHeaderWidth ?? 8\n  }\n\n  const widths = computeWidths(columns, rows, footerRows, maxHeaderWidth)\n\n  return (\n    <Box flexDirection=\"column\">\n      <Text dimColor>{buildBorder('top', widths)}</Text>\n\n      {/* Header */}\n      <Box>\n        {columns.map((col, i) => (\n          <React.Fragment key={i}>\n            <V />\n            <Text bold color={col.headerColor as any}>\n              {' '}{pad(truncate(col.header, maxHeaderWidth), widths[i]!, col.align ?? 'left')}{' '}\n            </Text>\n          </React.Fragment>\n        ))}\n        <V />\n      </Box>\n\n      <Text dimColor>{buildBorder('mid', widths)}</Text>\n\n      {/* Data rows */}\n      {rows.map((row, i) => (\n        <React.Fragment key={i}>\n          {renderRow(row, widths, columns)}\n        </React.Fragment>\n      ))}\n\n      {/* Footer */}\n      {footerRows.length > 0 && (\n        <>\n          <Text dimColor>{buildBorder('mid', widths)}</Text>\n          {footerRows.map((row, i) => (\n            <React.Fragment key={i}>\n              {renderRow(row, widths, columns)}\n            </React.Fragment>\n          ))}\n        </>\n      )}\n\n      <Text dimColor>{buildBorder('bot', widths)}</Text>\n    </Box>\n  )\n}\n\nexport default Table\n"
    }
  ]
}
