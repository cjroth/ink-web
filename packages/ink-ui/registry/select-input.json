{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "select-input",
  "type": "registry:ui",
  "title": "Select Input",
  "description": "A terminal select input with keyboard navigation",
  "files": [
    {
      "path": "ui/select-input.tsx",
      "type": "registry:ui",
      "target": "components/ui/select-input.tsx",
      "content": "/**\n * Select Input component for ink-web\n *\n * Based on ink-select-input by Vadim Demedes\n * https://github.com/vadimdemedes/ink-select-input\n * MIT License - Copyright (c) Vadim Demedes <vadimdemedes@hey.com>\n *\n * Adapted for browser compatibility with ink-web by removing Node.js dependencies.\n */\n\nimport React, { useState, useEffect, useRef, useCallback } from 'react'\nimport { Box, Text, useInput } from 'ink-web/bundled'\n\nexport type SelectInputItem<V> = {\n  key?: string\n  label: string\n  value: V\n}\n\nexport interface IndicatorProps {\n  readonly isSelected?: boolean\n}\n\nexport interface ItemProps {\n  readonly isSelected?: boolean\n  readonly label: string\n}\n\nfunction DefaultIndicator({ isSelected = false }: IndicatorProps) {\n  return (\n    <Box marginRight={1}>\n      {isSelected ? (\n        <Text color=\"blue\">‚ùØ</Text>\n      ) : (\n        <Text> </Text>\n      )}\n    </Box>\n  )\n}\n\nfunction DefaultItem({ isSelected = false, label }: ItemProps) {\n  return <Text color={isSelected ? 'blue' : undefined}>{label}</Text>\n}\n\n// Simple array rotation helper (replaces to-rotated)\nfunction rotateArray<T>(array: T[], count: number): T[] {\n  const len = array.length\n  if (len === 0) return array\n  const normalizedCount = ((count % len) + len) % len\n  return [...array.slice(normalizedCount), ...array.slice(0, normalizedCount)]\n}\n\n// Deep equality check for arrays of items (replaces node:util)\nfunction areItemsEqual<V>(a: SelectInputItem<V>[], b: SelectInputItem<V>[]): boolean {\n  if (a.length !== b.length) return false\n  return a.every((item, index) => {\n    const other = b[index]\n    return item.value === other?.value\n  })\n}\n\nexport interface SelectInputProps<V> {\n  items?: SelectInputItem<V>[]\n  isFocused?: boolean\n  initialIndex?: number\n  limit?: number\n  indicatorComponent?: React.FC<IndicatorProps>\n  itemComponent?: React.FC<ItemProps>\n  onSelect?: (item: SelectInputItem<V>) => void\n  onHighlight?: (item: SelectInputItem<V>) => void\n}\n\nexport function SelectInput<V>({\n  items = [],\n  isFocused = true,\n  initialIndex = 0,\n  indicatorComponent: IndicatorComponent = DefaultIndicator,\n  itemComponent: ItemComponent = DefaultItem,\n  limit: customLimit,\n  onSelect,\n  onHighlight,\n}: SelectInputProps<V>) {\n  const hasLimit = typeof customLimit === 'number' && items.length > customLimit\n  const limit = hasLimit ? Math.min(customLimit, items.length) : items.length\n  const lastIndex = limit - 1\n  const [rotateIndex, setRotateIndex] = useState(\n    initialIndex > lastIndex ? lastIndex - initialIndex : 0\n  )\n  const [selectedIndex, setSelectedIndex] = useState(\n    initialIndex ? (initialIndex > lastIndex ? lastIndex : initialIndex) : 0\n  )\n  const previousItems = useRef<SelectInputItem<V>[]>(items)\n\n  useEffect(() => {\n    if (!areItemsEqual(previousItems.current, items)) {\n      setRotateIndex(0)\n      setSelectedIndex(0)\n    }\n    previousItems.current = items\n  }, [items])\n\n  useInput(\n    useCallback(\n      (input, key) => {\n        if (input === 'k' || key.upArrow) {\n          const lastIdx = (hasLimit ? limit : items.length) - 1\n          const atFirstIndex = selectedIndex === 0\n          const nextIndex = hasLimit ? selectedIndex : lastIdx\n          const nextRotateIndex = atFirstIndex ? rotateIndex + 1 : rotateIndex\n          const nextSelectedIndex = atFirstIndex ? nextIndex : selectedIndex - 1\n\n          setRotateIndex(nextRotateIndex)\n          setSelectedIndex(nextSelectedIndex)\n\n          const slicedItems = hasLimit\n            ? rotateArray(items, nextRotateIndex).slice(0, limit)\n            : items\n\n          if (typeof onHighlight === 'function') {\n            onHighlight(slicedItems[nextSelectedIndex]!)\n          }\n        }\n\n        if (input === 'j' || key.downArrow) {\n          const atLastIndex = selectedIndex === (hasLimit ? limit : items.length) - 1\n          const nextIndex = hasLimit ? selectedIndex : 0\n          const nextRotateIndex = atLastIndex ? rotateIndex - 1 : rotateIndex\n          const nextSelectedIndex = atLastIndex ? nextIndex : selectedIndex + 1\n\n          setRotateIndex(nextRotateIndex)\n          setSelectedIndex(nextSelectedIndex)\n\n          const slicedItems = hasLimit\n            ? rotateArray(items, nextRotateIndex).slice(0, limit)\n            : items\n\n          if (typeof onHighlight === 'function') {\n            onHighlight(slicedItems[nextSelectedIndex]!)\n          }\n        }\n\n        if (/^[1-9]$/.test(input)) {\n          const targetIndex = Number.parseInt(input, 10) - 1\n          const visibleItems = hasLimit\n            ? rotateArray(items, rotateIndex).slice(0, limit)\n            : items\n\n          if (targetIndex >= 0 && targetIndex < visibleItems.length) {\n            const selectedItem = visibleItems[targetIndex]\n            if (selectedItem) {\n              onSelect?.(selectedItem)\n            }\n          }\n        }\n\n        if (key.return) {\n          const slicedItems = hasLimit\n            ? rotateArray(items, rotateIndex).slice(0, limit)\n            : items\n\n          if (typeof onSelect === 'function') {\n            onSelect(slicedItems[selectedIndex]!)\n          }\n        }\n      },\n      [hasLimit, limit, rotateIndex, selectedIndex, items, onSelect, onHighlight]\n    ),\n    { isActive: isFocused }\n  )\n\n  const slicedItems = hasLimit\n    ? rotateArray(items, rotateIndex).slice(0, limit)\n    : items\n\n  return (\n    <Box flexDirection=\"column\">\n      {slicedItems.map((item, index) => {\n        const isSelected = index === selectedIndex\n        return (\n          <Box key={item.key ?? String(item.value)}>\n            <IndicatorComponent isSelected={isSelected} />\n            <ItemComponent {...item} isSelected={isSelected} />\n          </Box>\n        )\n      })}\n    </Box>\n  )\n}\n\nexport default SelectInput\n"
    }
  ]
}
